"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[600],{600:(V,g,l)=>{l.r(g),l.d(g,{PoolsModule:()=>R});var v=l(9808),C=l(1083),f=l(4847),c=l(8279),P=l(7579),T=l(2722),d=l(8966),x=l(5226),h=l.n(x),o=l(5e3),s=l(3075);let A=(()=>{class t{constructor(e){this.fb=e,this.errorMessage=null,this.baseForm=this.fb.group({codigo:["",[s.kI.required,s.kI.minLength(6)]],camaronera:["",[s.kI.required,s.kI.minLength(4)]],responsable:["",[s.kI.required,s.kI.minLength(4)]]})}patchValue(e){throw new Error("Method not implemented.")}isValidField(e){var n,a,i;return this.getErrorMessage(e),((null===(n=this.baseForm.get(e))||void 0===n?void 0:n.touched)||(null===(a=this.baseForm.get(e))||void 0===a?void 0:a.dirty))&&!(null===(i=this.baseForm.get(e))||void 0===i?void 0:i.valid)}getErrorMessage(e){var n;const{errors:a}=this.baseForm.get(e);if(a){const m={required:"Campo requerido",minLength:`Debe tener minimo ${null===(n=null==a?void 0:a.minlength)||void 0===n?void 0:n.requiredLength} caracteres`},p=Object.keys(a).find(Boolean);this.errorMessage=m[p]}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(s.qu))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=l(7477),b=l(7322),F=l(7531),Z=l(7423);function y(t,r){if(1&t&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.hij(" ",e.poolForm.errorMessage," ")}}function w(t,r){if(1&t&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.hij(" ",e.poolForm.errorMessage," ")}}function M(t,r){if(1&t&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.hij(" ",e.poolForm.errorMessage," ")}}var u=(()=>{return(t=u||(u={})).EDIT="edit",t.NEW="new",u;var t})();let D=(()=>{class t{constructor(e,n,a){this.data=e,this.poolForm=n,this.poolSvc=a,this.actionTODO=u.NEW,this.showPasswordField=!0,this.hide=!0}ngOnInit(){var e;(null===(e=this.data)||void 0===e?void 0:e.pool.hasOwnProperty("id"))?(this.actionTODO=u.EDIT,this.pathFormData(),this.data.title="Editar Piscina"):(this.poolForm.baseForm.markAsUntouched(),this.poolForm.baseForm.get("codigo").setValue(null),this.poolForm.baseForm.get("camaronera").setValue(null),this.poolForm.baseForm.get("responsable").setValue(null),this.poolForm.baseForm.updateValueAndValidity())}onSave(){var e,n;const a=this.poolForm.baseForm.value;if(this.actionTODO===u.NEW)this.poolSvc.new(a).subscribe(i=>{h().fire({position:"center",icon:"success",title:"Piscina Creada",showConfirmButton:!1,timer:1500})});else{const i=null===(n=null===(e=this.data)||void 0===e?void 0:e.pool)||void 0===n?void 0:n.id;this.poolSvc.update(i,a).subscribe(m=>{h().fire({position:"center",icon:"success",title:m.message,showConfirmButton:!1,timer:1e3})})}}checkField(e){return this.poolForm.isValidField(e)}pathFormData(){var e,n,a,i,m,p;this.poolForm.baseForm.patchValue({codigo:null===(n=null===(e=this.data)||void 0===e?void 0:e.pool)||void 0===n?void 0:n.codigo,camaronera:null===(i=null===(a=this.data)||void 0===a?void 0:a.pool)||void 0===i?void 0:i.camaronera,responsable:null===(p=null===(m=this.data)||void 0===m?void 0:m.pool)||void 0===p?void 0:p.responsable})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.WI),o.Y36(A),o.Y36(_.q))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-modal-pool"]],decls:19,vars:6,consts:[["mat-dialog-title",""],[1,"modal-form"],[3,"formGroup"],[1,"full-width-input"],["formControlName","codigo","matInput","","placeholder","codigo","required",""],[4,"ngIf"],["formControlName","camaronera","matInput","","placeholder","camaronera","required",""],["formControlName","responsable","matInput","","placeholder","responsable","required",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","ckdFocusInitial","",3,"mat-dialog-close","click"]],template:function(e,n){1&e&&(o.TgZ(0,"h2",0),o._uU(1),o.qZA(),o.TgZ(2,"mat-dialog-content"),o.TgZ(3,"div",1),o.TgZ(4,"form",2),o.TgZ(5,"mat-form-field",3),o._UZ(6,"input",4),o.YNc(7,y,2,1,"mat-error",5),o.qZA(),o.TgZ(8,"mat-form-field",3),o._UZ(9,"input",6),o.YNc(10,w,2,1,"mat-error",5),o.qZA(),o.TgZ(11,"mat-form-field",3),o._UZ(12,"input",7),o.YNc(13,M,2,1,"mat-error",5),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(14,"mat-dialog-actions",8),o.TgZ(15,"button",9),o._uU(16,"Cancelar "),o.qZA(),o.TgZ(17,"button",10),o.NdJ("click",function(){return n.onSave()}),o._uU(18," Guardar "),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",null==n.data?null:n.data.title,""),o.xp6(3),o.Q6J("formGroup",n.poolForm.baseForm),o.xp6(3),o.Q6J("ngIf",n.checkField("codigo")),o.xp6(3),o.Q6J("ngIf",n.checkField("camaronera")),o.xp6(3),o.Q6J("ngIf",n.checkField("responsable")),o.xp6(4),o.Q6J("mat-dialog-close",!0))},directives:[d.uh,d.xY,s._Y,s.JL,s.sg,b.KE,s.Fj,F.Nt,s.JJ,s.u,s.Q7,v.O5,b.TO,d.H8,Z.lW,d.ZT],styles:[".modal-form[_ngcontent-%COMP%]{padding:1rem 0}.full-width-input[_ngcontent-%COMP%]{width:100%}"]}),t})();function N(t,r){1&t&&(o.TgZ(0,"th",17),o._uU(1," No. "),o.qZA())}function S(t,r){if(1&t&&(o.TgZ(0,"td",18),o._uU(1),o.qZA()),2&t){const e=r.index;o.xp6(1),o.hij(" ",e+1," ")}}function U(t,r){1&t&&(o.TgZ(0,"th",19),o._uU(1," Codigo "),o.qZA())}function q(t,r){if(1&t&&(o.TgZ(0,"td",18),o._uU(1),o.qZA()),2&t){const e=r.$implicit;o.xp6(1),o.hij(" ",e.codigo," ")}}function O(t,r){1&t&&(o.TgZ(0,"th",20),o._uU(1," Responsable "),o.qZA())}function Y(t,r){if(1&t&&(o.TgZ(0,"td",18),o._uU(1),o.qZA()),2&t){const e=r.$implicit;o.xp6(1),o.hij(" ",e.responsable," ")}}function I(t,r){1&t&&(o.TgZ(0,"th",21),o._uU(1," Camaronera "),o.qZA())}function k(t,r){if(1&t&&(o.TgZ(0,"td",18),o._uU(1),o.qZA()),2&t){const e=r.$implicit;o.xp6(1),o.hij(" ",e.camaronera," ")}}function B(t,r){1&t&&(o.TgZ(0,"th",22),o._uU(1," Acciones "),o.qZA())}function E(t,r){if(1&t){const e=o.EpF();o.TgZ(0,"td",18),o.TgZ(1,"div",0),o.TgZ(2,"button",23),o.NdJ("click",function(){const i=o.CHM(e).$implicit;return o.oxw().onOpenModalPool(i)}),o._uU(3,"Editar"),o.qZA(),o.TgZ(4,"button",24),o.NdJ("click",function(){const i=o.CHM(e).$implicit;return o.oxw().onDeletePool(i.id)}),o._uU(5,"Eliminar"),o.qZA(),o.qZA(),o.qZA()}}function J(t,r){1&t&&o._UZ(0,"tr",25)}function Q(t,r){1&t&&o._UZ(0,"tr",26)}const j=[{path:"",component:(()=>{class t{constructor(e,n){this.poolSvc=e,this._dialog=n,this.displayedColumns=["id","codigo","camaronera","responsable","acciones"],this.dataSource=new c.by,this.destroy$=new P.x}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}loadPools(){this.poolSvc.getAll().subscribe(e=>{this.dataSource.data=e})}ngOnInit(){this.loadPools()}ngAfterViewInit(){this.dataSource.sort=this.sort}onDeletePool(e){h().fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s revertir el cambio",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1S\xed, eliminar!"}).then(n=>{n.isConfirmed&&this.poolSvc.delete(e).pipe((0,T.R)(this.destroy$)).subscribe(a=>{h().fire("\xa1Eliminado!",null==a?void 0:a.message,"success"),this.loadPools()})})}onOpenModalPool(e={}){this._dialog.open(D,{height:"400px",width:"600px",data:{title:"Nueva Piscina",pool:e}}).afterClosed().subscribe(n=>{this.loadPools()})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(_.q),o.Y36(d.uw))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-pools"]],viewQuery:function(e,n){if(1&e&&o.Gf(f.YE,5),2&e){let a;o.iGM(a=o.CRH())&&(n.sort=a.first)}},decls:23,vars:3,consts:[[1,"table-button-row"],["mat-flat-button","","color","primary",1,"btn-new",3,"click"],[1,"tableScroll"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by id",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codigo"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by codigo",4,"matHeaderCellDef"],["matColumnDef","responsable"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by responsable",4,"matHeaderCellDef"],["matColumnDef","camaronera"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by camaronera",4,"matHeaderCellDef"],["matColumnDef","acciones"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by id"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by codigo"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by responsable"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by camaronera"],["mat-header-cell","","mat-sort-header",""],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"button",1),o.NdJ("click",function(){return n.onOpenModalPool()}),o._uU(2,"Agregar Piscina"),o.qZA(),o.qZA(),o.TgZ(3,"div",2),o.TgZ(4,"table",3),o.ynx(5,4),o.YNc(6,N,2,0,"th",5),o.YNc(7,S,2,1,"td",6),o.BQk(),o.ynx(8,7),o.YNc(9,U,2,0,"th",8),o.YNc(10,q,2,1,"td",6),o.BQk(),o.ynx(11,9),o.YNc(12,O,2,0,"th",10),o.YNc(13,Y,2,1,"td",6),o.BQk(),o.ynx(14,11),o.YNc(15,I,2,0,"th",12),o.YNc(16,k,2,1,"td",6),o.BQk(),o._uU(17," Acciones "),o.ynx(18,13),o.YNc(19,B,2,0,"th",14),o.YNc(20,E,6,0,"td",6),o.BQk(),o.YNc(21,J,1,0,"tr",15),o.YNc(22,Q,1,0,"tr",16),o.qZA(),o.qZA()),2&e&&(o.xp6(4),o.Q6J("dataSource",n.dataSource),o.xp6(17),o.Q6J("matHeaderRowDef",n.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",n.displayedColumns))},directives:[Z.lW,c.BZ,f.YE,c.w1,c.fO,c.ge,f.nU,c.Dz,c.ev,c.as,c.XQ,c.nj,c.Gk],styles:["table[_ngcontent-%COMP%]{width:97%;margin:0 auto;margin-top:1rem}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.table-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:12px}.btn-new[_ngcontent-%COMP%]{width:20%}.tableScroll[_ngcontent-%COMP%]{height:500px;max-width:97%;overflow:auto;margin:0 auto;margin-top:1rem}"]}),t})()}];let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[C.Bz.forChild(j)],C.Bz]}),t})(),R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[v.ez,H]]}),t})()}}]);